version: 2
jobs:
    build:
        docker:
          # specify the version you desire here
          - image: circleci/node:10.14   
        working_directory: ~/app
        steps:
          - checkout
          - run: git submodule sync --recursive
          - run: git submodule update --recursive --init
          - run: 
                command: |
                    echo Hello World build

    job2:
        docker:
            - image: cibuilds/github:0.10
        steps:
            - run: 
                command: |
                    echo Hello World release
            
workflows:
    version: 2
    build_and_test:
        jobs:
            - build:
                filters:
                    branches:
                        ignore: /.*/
                    tags:
                        only: /^v\d+.\d+.\d+$/
            - job2:
                requires:
                    - build
                filters:
                    branches:
                        ignore: /.*/
                    tags:
                        only: /^v\d+.\d+.\d+$/